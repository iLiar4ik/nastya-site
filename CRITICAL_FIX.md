# КРИТИЧНО: Решение проблемы с зависанием сборки

## Проблема
Сборка зависает на `npm install` более 5 часов. Это ненормально.

## Что я сделал
1. Заменил сложный multi-stage Dockerfile на упрощенный
2. Упростил процесс сборки

## Что нужно сделать СЕЙЧАС

### 1. Отмените текущий деплой в Dokploy
Нажмите "Stop" или "Cancel" в Dokploy

### 2. Исправьте NEXTAUTH_URL (КРИТИЧНО!)
В переменных окружения Dokploy измените:
```
NEXTAUTH_URL=http://localhost:8000
```
На реальный URL вашего сервера:
```
NEXTAUTH_URL=http://ваш-ip-адрес:8000
```
Или если есть домен:
```
NEXTAUTH_URL=https://ваш-домен.com
```

### 3. Перезапустите деплой
После отмены текущего деплоя нажмите "Deploy" снова

## Альтернативное решение: Без Docker Compose

Если сборка все еще медленная, попробуйте использовать обычный Docker деплой:

1. В Dokploy измените тип проекта с "Docker Compose" на "Docker"
2. Укажите Dockerfile
3. Build Command: `npm install && npm run db:generate && npm run build`
4. Start Command: `npm start`

## Проверка ресурсов сервера

Если сервер очень слабый, сборка может быть медленной. Проверьте через SSH:

```bash
free -h    # Должно быть минимум 2GB свободной RAM
df -h      # Должно быть место на диске
nproc      # Количество CPU ядер
```

## Если ничего не помогает

Рассмотрите вариант:
1. Собрать образ локально на более мощной машине
2. Загрузить в Docker Hub
3. Использовать готовый образ в docker-compose

---

**Главное:** Исправьте NEXTAUTH_URL и перезапустите деплой с упрощенным Dockerfile!

