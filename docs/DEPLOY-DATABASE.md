# Ошибка «no such table: users» при входе в админку

Если в логах при логине видно `SQLITE_ERROR: no such table: users`, при этом при старте контейнера init-db пишет «Admin user already exists», значит **скрипт init-db и приложение открывают разные файлы базы**.

## Что сделать

### 1. Задать единый путь к БД в production

В **Dokploy → приложение → Environment** добавьте:

```env
DATABASE_URL=file:/app/data/payload.db
```

Так и init-db, и Next.js будут использовать один и тот же файл независимо от рабочей директории.

### 2. Перезапустить приложение

Сохраните переменные и сделайте **Redeploy** (или перезапуск контейнера). После этого при старте init-db создаст таблицы и админа в `/app/data/payload.db`, и приложение будет читать ту же базу.

### 3. Том для данных

Убедитесь, что в Dokploy для приложения смонтирован том на **/app/data** (или каталог, в котором лежит `payload.db`), иначе после перезапуска контейнера база может создаваться заново и данные не сохранятся.

---

После правок в коде приложение в production всегда использует путь `/app/data/payload.db`, если не задан `DATABASE_URL`. Явная переменная `DATABASE_URL=file:/app/data/payload.db` убирает расхождение путей между init-db и приложением.
