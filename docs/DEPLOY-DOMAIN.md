# Смена домена и «странный адрес» в логах

## Адрес в логах (`http://da6b773b6090:3000`)

Это **нормально**. Так Next.js в Docker показывает внутренний адрес контейнера. Приложение слушает порт 3000, а снаружи к нему обращается прокси (Dokploy) по вашему HTTPS-домену. На то, как открывается сайт у пользователя, эта строка не влияет.

## Сайт не открывается по новому домену

Сделайте по шагам:

### 1. Домен в Dokploy

- В настройках приложения укажите **новый домен** (например `https://ваш-сайт.ru`).
- Убедитесь, что для этого домена включён **SSL** (Let's Encrypt или свой сертификат).
- Прокси должен принимать запросы на этот домен и отправлять их в контейнер на порт 3000.

### 2. Переменная окружения

В **Dokploy → ваше приложение → Environment** добавьте (или измените):

```env
NEXT_PUBLIC_SERVER_URL=https://ваш-новый-домен.ru
```

- Без слэша в конце.
- Обязательно **https**, если сайт открывается по HTTPS.

**Важно:** переменные `NEXT_PUBLIC_*` подставляются при **сборке**. После смены домена нужно **заново задеплоить** (пересобрать проект), иначе в браузере останется старый URL (например для кнопки «Выйти»).

### 3. Передеплой

После смены домена или `NEXT_PUBLIC_SERVER_URL`:

- Сделайте **Redeploy** в Dokploy (или новый деплой с GitHub), чтобы прошла новая сборка.
- После успешного деплоя откройте сайт по новому домену.

### 4. Если всё ещё не открывается

- Проверьте DNS: запись для домена должна указывать на сервер, где крутится Dokploy.
- В Dokploy проверьте, что у приложения указан именно этот домен и что нет конфликта с другими приложениями.
- Откройте сайт в режиме инкогнито или с другого устройства, чтобы исключить кэш и старые редиректы.
