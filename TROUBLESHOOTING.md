# Решение проблем с долгой сборкой

## Проблема: Сборка занимает более 30 минут

Это ненормально. Обычно сборка должна занимать 2-5 минут.

## Возможные причины и решения

### 1. Проверьте логи в Dokploy

В Dokploy откройте раздел "Logs" или "Логи" и посмотрите:
- На каком этапе зависла сборка
- Есть ли ошибки
- Какая последняя строка в логах

### 2. Отмените текущий деплой

Если сборка зависла:
1. В Dokploy нажмите "Stop" или "Cancel"
2. Проверьте логи
3. Попробуйте перезапустить

### 3. Проверьте ресурсы сервера

Сборка может быть медленной из-за:
- Недостаточно RAM
- Медленный CPU
- Медленный диск

Проверьте через SSH:
```bash
# Проверьте использование ресурсов
htop
# или
free -h
df -h
```

### 4. Оптимизация Dockerfile

Если проблема в медленной сборке, можно:
- Использовать кэш Docker слоев
- Уменьшить количество зависимостей
- Использовать более легкий базовый образ

### 5. Альтернатива: Сборка без Docker Compose

Если Docker Compose вызывает проблемы, можно использовать обычный Docker деплой в Dokploy:

1. В настройках проекта измените тип с "Docker Compose" на "Docker"
2. Укажите Dockerfile
3. Настройте Build Command и Start Command

### 6. Проверка через SSH

Если есть доступ к серверу:

```bash
# Подключитесь к серверу
ssh user@ваш-сервер

# Перейдите в директорию проекта
cd /etc/dokploy/compose/nastyarepetitor-siterepetitor-fffvac/code

# Проверьте логи Docker
docker-compose logs -f

# Или проверьте процессы
docker ps -a

# Проверьте использование ресурсов
docker stats
```

### 7. Быстрое решение: Перезапуск деплоя

1. В Dokploy остановите текущий деплой
2. Очистите кэш (если есть такая опция)
3. Запустите деплой заново

### 8. Если сборка все еще медленная

Попробуйте упростить процесс:

1. Соберите образ локально и загрузите в Docker Hub
2. Или используйте pre-built образ
3. Или разделите сборку на этапы

## Рекомендации

1. **Сначала проверьте логи** - это покажет, где именно проблема
2. **Проверьте ресурсы сервера** - возможно не хватает памяти/CPU
3. **Попробуйте перезапустить** - иногда помогает
4. **Если ничего не помогает** - рассмотрите альтернативный способ деплоя

## Что делать прямо сейчас

1. Откройте логи в Dokploy
2. Посмотрите последние строки - на каком этапе зависло
3. Если видите ошибку - пришлите ее
4. Если просто долго идет - попробуйте отменить и перезапустить

---

**Важно:** Пришлите последние строки логов, чтобы я мог точно определить проблему.

